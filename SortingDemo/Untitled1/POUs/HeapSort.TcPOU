<?xml version="1.0" encoding="utf-8"?>
<TcPlcObject Version="1.1.0.1" ProductVersion="3.1.4026.0">
  <POU Name="HeapSort" Id="{62394cde-d5ae-48c0-8fe9-33ba4e45de74}" SpecialFunc="None">
    <Declaration><![CDATA[// Code generated by OpenAI
// Model used:	gpt-3.5-turbo
// TwinCAT Chat powered by ChatGPT:	3.6
// Time:	Monday, September 18, 2023 4:10 PM
FUNCTION HeapSort
VAR
	i : DINT;
	temp : LREAL;
	upperbound : DINT;
	lowerbound: DINT;
END_VAR
VAR_IN_OUT
	target: ARRAY[*] OF LREAL;
END_VAR]]></Declaration>
    <Implementation>
      <ST><![CDATA[// Build heap
upperbound := UPPER_BOUND(target, 1);
lowerbound := LOWER_BOUND(target, 1);
FOR i := (upperbound + lowerbound) / 2 TO lowerbound BY -1 DO
  Heapify(upperbound, i, target);
END_FOR;

// One by one extract an element from heap
FOR i := upperbound TO (lowerbound + 1) BY -1 DO
  // Move current root to end
  temp := target[lowerbound];
  target[lowerbound] := target[i];
  target[i] := temp;

  // Call max heapify on the reduced heap
  Heapify(i, lowerbound, target);
END_FOR;
]]></ST>
    </Implementation>
  </POU>
</TcPlcObject>