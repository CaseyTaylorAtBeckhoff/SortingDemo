<?xml version="1.0" encoding="utf-8"?>
<TcPlcObject Version="1.1.0.1" ProductVersion="3.1.4026.0">
  <POU Name="Heapify" Id="{4c940436-8a93-487b-9eb0-dc23516ecc80}" SpecialFunc="None">
    <Declaration><![CDATA[// Code generated by OpenAI
// Model used:	gpt-3.5-turbo
// TwinCAT Chat powered by ChatGPT:	3.6
// Time:	Monday, September 18, 2023 4:17 PM
FUNCTION Heapify
VAR_INPUT
	size : DINT;
	i : DINT;
END_VAR
VAR
	largest : DINT;
	left : DINT;
	right : DINT;
	temp : LREAL;
END_VAR
VAR_IN_OUT
	target: array[1..100] of LREAL;
END_VAR]]></Declaration>
    <Implementation>
      <ST><![CDATA[// Initialize largest as root
largest := i;
left := 2 * i;
right := 2 * i + 1;

// If left child is larger than root
IF left < size THEN 
	IF target[left] > target[largest] THEN
		largest := left;
	END_IF;
END_IF;

// If right child is larger than largest so far
IF right < size THEN
	IF target[right] > target[largest] THEN
		largest := right;
	END_IF;
END_IF;

// If largest is not root
IF largest <> i THEN
	temp := target[i];
	target[i] := target[largest];
	target[largest] := temp;

	// Recursively heapify the affected sub-tree
	Heapify(size, largest, target);
END_IF;
]]></ST>
    </Implementation>
  </POU>
</TcPlcObject>